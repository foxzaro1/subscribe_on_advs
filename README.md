## О проекте

Проект является тестовым заданием. Проект написан с  большими ограничениями и требуется в доработках для использования в реальной ситуации, я старался написать его на новом для себя фреймворке Laravel. Буду не против получения обратной связи.

## База данных 

Ключевые таблицы users и adverts, завел третью табличку чтобы она связывала много ко многим.
_______________________________________________________________________
Ключевые поля у таблицы users :
1)  id - идентификатор пользователя AI
2)  email - емэйл пользователя
_______________________________________________________________________
Ключевые поля у таблицы adverts :
1)  id - идентификатор объявлений AI
2)  price - цена указанная в объявлении
3)  url - ссылка на объявление 
4)  advCode - код объявления для того, чтобы не записывать одно и тоже объявление дважды в случае разности поступающих ссылок (с/без www) и тд.

## Фрагменты кода, решающие конкретные задачи

1) Подписка на изменение цены -> App\Services\Action\Record
2) Отслеживание изменений цены -> App\Services\Action\Process && App\Services\Action\Parse
3) Отправка уведомления на почту -> App\Services\Action\Mailing && App\Mail\MailUpdateAdv
4) Работа с БД -> App\Models\Advert && App\Models\User
5) Cron -> App\Console\Kernel

## Routes

1)Запись в бд объявления и  пользователя [/get_data?url='url'&email='email']: 
    1. url, такого типа -> https://www.avito.ru/sankt-peterburg/sport_i_otdyh/original_ninebot_max_30kmch_g30_samokat_1995313990
    2. email, такого типа -> test@gmail.com
2) Происходит непосредственно весь процессинг [/parse]

## Прочая информация

Отправка писем через smtp.gmail.com
Некоторые ограничения :
    Желательно иметь : валидные объявления, валидные email (Подразумевается,  что идет проверка на стороне отправляющего http запрос на запись)
    Весь процесинг в итоге выполняется на кроне и рассчитан на небольшую базу подписок, я делаю это с помощью chunk(20) и отслеживаю статус adverts, когда они все update начинаю парсинг снова, в идеале конечно было бы иметь вебхук, но я не нашел в доке. Попытался добавить Jobs для отправки Email.

